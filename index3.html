<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Juego de Memoria - Nivel 1</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="game-container">
        <div id="header">
            <h1>Juego de Memoria</h1>
            <!-- Añadir nombre del jugador, puntos y grado -->
            <div id="nombreJugadorDisplay"></div>
            <div id="puntosAcumuladosDisplay"></div>
            <div id="gradoJugadorDisplay"></div>
        </div>
        <div id="capitan-viento-container">
            <div id="dialogo">
                <p id="mensaje-capitan">
                    ¡Hola! Soy el Capitán Viento. Un estabilizador vertical ayuda a mantener el avión en línea recta durante el vuelo. Haz clic aquí para ver un ejemplo y comenzar el juego. HAZ CLICK PARA COMENZAR
                </p>
                <img id="imagen-referencia" src="colores.jpg" alt="Estabilizador Vertical">
                <button id="play-voice">Reproducir Relato</button> <!-- Botón para activar la voz -->
            </div>
            <img id="capitan-viento" src="capitan_viento.png" alt="Capitán Viento">
        </div>
        <div id="game-board">
            <div id="memory-board" class="grid-2x2">
                <div class="memory-card" data-name="estabilizador">
                    <div class="card-back"></div>
                    <img class="card-front" src="estabilizador-removebg-preview.png" alt="Estabilizador Vertical">
                </div>
                <div class="memory-card" data-name="incorrecto1">
                    <div class="card-back"></div>
                    <img class="card-front" src="avion.png" alt="Imagen Incorrecta 1">
                </div>
                <div class="memory-card" data-name="incorrecto2">
                    <div class="card-back"></div>
                    <img class="card-front" src="avion.png" alt="Imagen Incorrecta 2">
                </div>
                <div class="memory-card" data-name="incorrecto3">
                    <div class="card-back"></div>
                    <img class="card-front" src="avion.png" alt="Imagen Incorrecta 3">
                </div>
            </div>
            <div id="sidebar">
                <p>Puntaje: <span id="score">0</span></p>
                <p>Tiempo restante: <span id="time">30</span> segundos</p>
                <p>Movimientos: <span id="moves">0</span></p>
            </div>
        </div>
        <div id="feedback-container">
            <p id="feedback"></p>
        </div>
    </div>
    <audio id="gameMusic" src="musica.mp3" loop></audio>

    <script>
        // Ajustar el volumen de la música de fondo al 20%
        const music = document.getElementById('gameMusic');
        music.volume = 0.2;

        // Reproducir música si estaba sonando en la página anterior
        if (localStorage.getItem('musicPlaying') === 'true') {
            music.play();
        }

        // Función para convertir el texto a voz usando la API SpeechSynthesis
        function speakText(text) {
            const synth = window.speechSynthesis;  // API de síntesis de voz
            const utterance = new SpeechSynthesisUtterance(text);  // Crea una nueva instancia
            utterance.lang = 'es-ES';  // Configura el idioma a español
            synth.speak(utterance);    // Reproduce el texto
        }

        // Al hacer clic en el botón "Reproducir Relato", reproducir el texto del Capitán Viento en voz alta
        document.getElementById('play-voice').addEventListener('click', function() {
            const mensaje = document.getElementById('mensaje-capitan').innerText;
            speakText(mensaje);  // Llama a la función con el texto a reproducir
        });
    </script>
<iframe src="music.html" style="display:none;" id="music-iframe"></iframe>
    <script src="script.js"></script>
</body>
</html>
